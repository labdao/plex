{
    "class": "CommandLineTool",
    "name": "diffusion",
    "description": "RFdiffusion is a method for structure generation, with or without conditional information (a motif, target etc). It can perform a whole range of protein design challenges.",
    "author": "sokrypton",
    "task": "protein design",
    "baseCommand": [
        "/bin/bash",
        "-c"
    ],
    "arguments": [
        "python -u main.py \\",
        "inputs=container \\",
        "outputs=container \\",
        "params.basic_settings.pdb_chain=$(inputs.target_chain.value) \\",
        "params.advanced_settings.pdb_start_residue=$(inputs.target_start_residue.value) \\",
        "params.advanced_settings.pdb_end_residue=$(inputs.target_end_residue.value) \\",
        "params.advanced_settings.hotspot=$(inputs.hotspot.value) \\",
        "params.basic_settings.binder_length=$(inputs.binder_length.value) \\",
        "params.basic_settings.num_designs=$(inputs.number_of_binders.value) \\",
        "params.expert_settings.RFDiffusion_Binder.contigs_override=$(inputs.full_prompt.value);"
    ],
    "dockerPull": "quay.io/labdao/colabdesign@sha256:06c331562c5be4ebc6849f86df72348bfcb3365cd80d386f4222cd848c0abe92",
    "gpuBool": true,
    "networkBool": true,
    "cpu": 3,
    "memoryGB": 12,
    "inputs": {
        "target_protein": {
            "type": "File",
            "item": "",
            "glob": ["*.pdb"],
            "grouping": "target",
            "position": "101"
        },
        "target_chain": {
            "type": "string",
            "default": "A",
            "grouping": "target",
            "position": "102"
        },
        "target_start_residue": {
            "type": "int",
            "default": "1",
            "min": "1",
            "grouping": "target",
            "position": "103"
        },
        "target_end_residue": {
            "type": "int",
            "min": "1",
            "grouping": "target",
            "position": "104"
        },
        "hotspot": {
            "type": "string",
            "default": "",
            "grouping": "target",
            "description": "Target residues that should be in contact with the binder.",
            "example": "A30,A33,A34",
            "position": "105"
        },
        "binder_length": {
            "type": "int",
            "default": "50",
            "min": "1",
            "max": "1000",
            "description": "The length of the protein binder that is being designed",
            "grouping": "binder",
            "position": "201"
        },
        "number_of_binders": {
            "type": "int",
            "default": "2",
            "min": "1",
            "max": "32",
            "description": "The number of protein binders to be designed",
            "grouping": "binder",
            "position": "202"
        },
        "full_prompt": {
            "type": "string",
            "default": "",
            "description": "The complete prompt or 'contig' passed to the diffusion model. This overrides other GUI inputs.",
            "example": "A1-283:B1-6/1/B8-20/22/B43-47",
            "grouping": "_advanced",
            "position": "301"
        }
    },
    "outputs": {
        "scores": {
          "type": "File",
          "item": "",
          "glob": ["*_scores.csv"]
        },
        "best_design": {
          "type": "File",
          "item": "",
          "glob": ["*_best.pdb"]
        },
        "all_outputs": {
          "type": "Array",
          "item": "File",
          "glob": ["*.zip"]
        }
    }
}
